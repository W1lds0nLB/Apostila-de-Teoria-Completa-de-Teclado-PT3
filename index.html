<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apostila e Reharmonização Avançada</title>
<style>
body { font-family: Arial, Helvetica, sans-serif; margin:0; background:#f4f6f8; color:#222; line-height:1.6;}
header, nav, footer { background:#000; color:#fff; text-align:center;}
header { padding:25px;}
nav { padding:10px; position:sticky; top:0; z-index:100;}
nav a { color:#fff; margin:0 10px; text-decoration:none; font-size:14px;}
nav a:hover { text-decoration:underline;}
main { max-width:950px; margin:auto; padding:20px; background:#fff;}
h2 { border-bottom:2px solid #e5e7eb; padding-bottom:5px; margin-top:40px;}
table { width:100%; border-collapse:collapse; margin:15px 0;}
table, th, td { border:1px solid #cbd5e1;}
th, td { padding:8px; text-align:center;}
th { background:#e2e8f0;}
.box { background:#f1f5f9; padding:15px; border-left:5px solid #3b82f6; margin:15px 0;}
#reharmonizacao input { margin:5px 0; padding:5px; width:200px; }
#resultado-reh { margin-top:10px; background:#e2e8f0; padding:10px; border-radius:5px; white-space: pre-line;}
.footer-instagram img { width:26px; transition: transform .3s ease, filter .3s ease;}
.footer-instagram:hover img { transform: scale(1.2); filter: brightness(1.4);}
</style>
</head>
<body>

<header>
<img src="logo.png" alt="Logo Projeto Studio WLB" style="max-width:180px; width:100%; margin-bottom:15px; display:block; margin-left:auto; margin-right:auto;">
<h1>Apostila de Teoria de Teclado</h1>
<p>Teoria completa, escalas, campo harmônico e reharmonização avançada</p>
</header>

<nav>
<a href="#conceito">Conceito</a>
<a href="#escalas">Escalas</a>
<a href="#campo-maior">Campo Maior</a>
<a href="#campo-menor">Campo Menor</a>
<a href="#tetrades">Tétrades</a>
<a href="#exercicios">Exercícios</a>
<a href="#gabarito">Gabarito</a>
<a href="#reharmonizacao">Reharmonização</a>
</nav>

<main>
<section id="conceito">
<h2>1. O que é Campo Harmônico</h2>
<p>Campo harmônico é o conjunto de acordes formados a partir das notas de uma escala musical.</p>
<div class="box">Campo harmônico = escala + acordes formados sobre cada grau</div>
</section>

<section id="escalas">
<h2>2. Escalas Musicais</h2>
<h3>Escala Maior</h3>
<p>Tom – Tom – Semitom – Tom – Tom – Tom – Semitom</p>
<p>Exemplo C: C – D – E – F – G – A – B</p>
<h3>Escala Menor Natural</h3>
<p>Tom – Semitom – Tom – Tom – Semitom – Tom – Tom</p>
<p>Exemplo A: A – B – C – D – E – F – G</p>
<h3>Escalas com sustenidos e bemóis</h3>
<p>Inclui todas as 12 tonalidades, maiores e menores, com sustenidos (#) e bemóis (b).</p>
</section>

<section id="campo-maior">
<h2>3. Campo Harmônico Maior</h2>
<p>I – ii – iii – IV – V – vi – vii°</p>
<table>
<tr><th>Grau</th><th>Acorde</th><th>Tipo</th></tr>
<tr><td>I</td><td>C</td><td>Maior</td></tr>
<tr><td>ii</td><td>Dm</td><td>Menor</td></tr>
<tr><td>iii</td><td>Em</td><td>Menor</td></tr>
<tr><td>IV</td><td>F</td><td>Maior</td></tr>
<tr><td>V</td><td>G</td><td>Maior</td></tr>
<tr><td>vi</td><td>Am</td><td>Menor</td></tr>
<tr><td>vii°</td><td>B°</td><td>Diminuto</td></tr>
</table>
</section>

<section id="campo-menor">
<h2>4. Campo Harmônico Menor</h2>
<p>i – ii° – III – iv – v – VI – VII</p>
<p>Exemplo A menor: Am – B° – C – Dm – Em – F – G</p>
</section>

<section id="tetrades">
<h2>5. Campo Harmônico com 7ª (Tétrades)</h2>
<table>
<tr><th>Grau</th><th>Acorde</th></tr>
<tr><td>I</td><td>C7M</td></tr>
<tr><td>ii</td><td>Dm7</td></tr>
<tr><td>iii</td><td>Em7</td></tr>
<tr><td>IV</td><td>F7M</td></tr>
<tr><td>V</td><td>G7</td></tr>
<tr><td>vi</td><td>Am7</td></tr>
<tr><td>viiø</td><td>Bm7(b5)</td></tr>
</table>
</section>

<section id="exercicios">
<h2>6. Exercícios</h2>
<ol>
<li>Monte o campo harmônico de Sol maior.</li>
<li>Complete os graus no tom de Dó maior.</li>
<li>Monte o campo harmônico de Mi menor.</li>
<li>Analise a progressão: Am – F – C – G.</li>
</ol>
</section>

<section id="gabarito">
<h2>7. Gabarito</h2>
<p><strong>Sol maior:</strong> G – Am – Bm – C – D – Em – F#°</p>
<p><strong>Dó maior:</strong> C – Dm – Em – F – G – Am – B°</p>
<p><strong>Mi menor:</strong> Em – F#° – G – Am – Bm – C – D</p>
<p><strong>Progressão Am – F – C – G:</strong> Tom de Dó maior (vi – IV – I – V)</p>
</section>

<section id="reharmonizacao">
<h2>8. Reharmonização Avançada</h2>
<label for="progressao">Digite sua progressão:</label><br>
<input type="text" id="progressao" placeholder="Ex: C G Am F"><br>
<button onclick="reharmonizar()">Gerar reharmonizações</button>
<div id="resultado-reh"></div>
</section>

</main>

<footer>
<p>Projeto Studio WLB © 2025</p>
<a href="https://www.instagram.com/projeto_studio_wlb" target="_blank" class="footer-instagram">
<img src="instagram.png" alt="Instagram Projeto Studio WLB">
</a>
</footer>

<script>
// Lista completa de acordes com sustenidos e bemóis, maiores, menores, diminutos, 7ª
const acordesTodos = [
'C','C#','Db','D','D#','Eb','E','F','F#','Gb','G','G#','Ab','A','A#','Bb','B',
'Cm','C#m','Dbm','Dm','D#m','Ebm','Em','Fm','F#m','Gm','G#m','Abm','Am','A#m','Bbm','Bm',
'C7','C7M','C#m7','Db7','Db7M','D7','D7M','D#m7','Eb7','Eb7M','E7','E7M','F7','F7M','F#m7','Gb7','Gb7M','G7','G7M','G#m7','Ab7','Ab7M','A7','A7M','A#m7','Bb7','Bb7M','B7','B7M',
'C°','C#°','D°','D#°','E°','F°','F#°','G°','G#°','A°','A#°','B°'
];

// Função que gera reharmonizações múltiplas para progressão inteira
function reharmonizar() {
  const input = document.getElementById('progressao').value.trim();
  if (!input) return alert('Digite uma progressão.');

  const acordes = input.split(' ');

  // Valida acordes
  for (let a of acordes) {
    if (!acordesTodos.includes(a)) {
      alert(`Acorde não reconhecido: ${a}`);
      return;
    }
  }

  // Gera combinações de reharmonização para toda a progressão
  const opcoes = acordes.map(a => gerarVariacoes(a));

  const resultado = combinarProgressoes(opcoes);

  document.getElementById('resultado-reh').textContent = "Progressões alternativas sugeridas:\n\n" + resultado.join('\n\n');
}

// Gera variações para um acorde
function gerarVariacoes(acorde) {
  let variações = [];

  // Variação 1: mesma nota, forma diferente (maior/menor/7)
  if(acorde.endsWith('m')) variações.push(acorde.replace('m','')); 
  else if(acorde.endsWith('7')) variações.push(acorde.replace('7',''));
  else variações.push(acorde + 'm');

  // Variação 2: acorde de 7ª
  if(!acorde.includes('7')) variações.push(acorde+'7');

  // Variação 3: empréstimo modal (maior <-> menor)
  if(acorde.endsWith('m')) variações.push(acorde.replace('m',''));
  else if(acorde.endsWith('°')) variações.push(acorde.replace('°','m'));
  else variações.push(acorde+'m');

  // Variação 4: acorde tritonal (dim7 ou 7♭9 simplificado)
  if(acorde.endsWith('7')) variações.push(acorde.replace('7','°7'));
  else variações.push(acorde+'7');

  // Variação 5: inversão simples
  variações.push(acorde + '/'+acorde[0]);

  return variações.slice(0,5); // retorna 5 opções
}

// Combina as variações em progressões alternativas (limitado para não explodir)
function combinarProgressoes(opcoes) {
  const resultado = [];
  const max = 20; // limitar número de progressões
  function combinar(atual, profundidade) {
    if (resultado.length >= max) return;
    if (profundidade === opcoes.length) {
      resultado.push(atual.join(' '));
      return;
    }
    for (let v of opcoes[profundidade]) {
      combinar([...atual, v], profundidade + 1);
    }
  }
  combinar([], 0);
  return resultado;
}
</script>

</body>
</html>
